<script>
	import * as api from 'api.js';
	import { stores } from '@sapper/app';
	import { users } from '../../stores/userStore';
	import Textfield from '@smui/textfield';
	import { Icon as CommonIcon } from '@smui/common';

	export let selectionUserId;

	const { session } = stores();

	let filtered;
	let password = '';
	
	$: user = $session.user;
	$: currentUser = ( filtered = ( id => $users.filter( usr => usr.id === id ) )(selectionUserId)) && filtered.length && filtered[0];
	$: noUser = !currentUser;
	$: console.log(currentUser);
	
</script>

<style>
    .grid-item {
        background: var(--back-grid-item);
	}
    .user {
		grid-area: one;
		display: flex;
		flex-direction: column;
	}
	.user-wrapper {
		margin:  3rem;
	}
	.item {
		margin-bottom: 2rem;
	}
	:global(.item > label) {
		min-width: 80%;
	}
	.no-user {
		display: flex;
		justify-content: center;
		align-items: center;
	}
</style>
<div class="grid-item user" class:no-user={noUser}>
	{#if currentUser}
	<div class="user-wrapper">
		<div class="item">
			<Textfield bind:value={currentUser.email} label="" type="email" variant="outlined">
				<span slot="label"><CommonIcon class="material-icons" style="font-size: 1em; line-height: normal; vertical-align: middle;">email</CommonIcon> Email</span>
			</Textfield>
		</div>
		<div class="item">
			<Textfield bind:value={currentUser.name} label="Name" type="text" variant="outlined" />
		</div>
		<div class="item">
			<Textfield class="" bind:value={password} label="Password" type="password" variant="outlined" input$aria-controls="helper-text-title" input$aria-describedby="helper-text-title" />
		</div>
	</div>
	{:else}
	No User Selected
	{/if}
</div>